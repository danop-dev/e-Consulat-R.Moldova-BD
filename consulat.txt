DROP DATABASE IF EXISTS consulat;
CREATE DATABASE consulat;

CREATE TABLE adresa_nastere (
    id_nastere int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE adresa_domiciliu (
    id_domiciliu int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE adresa_resedinta (
    id_resedinta int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE doc_identitate (
	id_doc_identitate int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    IDNP int(20) NOT NULL,
    doc_md BOOLEAN,
    seria varchar(2),
    nr_serie int(10),
    tip_doc varchar(100),
    data_emitere DATE,
    data_expiratie DATE,
    valabilitatea_infinit BOOLEAN,
    emis varchar(20)
    
);

CREATE TABLE date_identitate (
    id_identitate int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nume varchar(40),
    prenume varchar(40),
    sex varchar(10),
    data_nasterii DATE,
    cetatenia varchar(10),
    id_doc_identitate int,
    email varchar(30),
    telefon int(20),
    
    FOREIGN KEY (id_doc_identitate) REFERENCES doc_identitate(id_doc_identitate)
);

CREATE TABLE parinti (
    id_parinti int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nume varchar(40),
    prenume varchar(40),
    gen_parinte varchar(10),
    id_identitate_parinte int,
    
    FOREIGN KEY (id_identitate_parinte) REFERENCES date_identitate(id_identitate)
);

CREATE TABLE copii_minori (
    id_copii int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nume varchar(40),
    prenume varchar(40),
    id_identitate_copil int,
    id_nastere_minor int,
        
    FOREIGN KEY (id_identitate_copil) REFERENCES date_identitate(id_identitate),
    FOREIGN KEY (id_nastere_minor) REFERENCES adresa_nastere(id_nastere)
);

CREATE TABLE users(
	id_user int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    email varchar(30),
    fname varchar(20),
    lname varchar(20),
    psw varchar(256) 
);

CREATE TABLE taxa(
	id_taxa int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    modalitate varchar(30),
    valuta varchar(10),
    taxa int(8)
);

CREATE TABLE cereri (
    id_cereri int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    cod_cerere varchar(20),
    servicii_consulat varchar(100),
    oficiul_consulat varchar(100),
    data_programarii DATE,
    data_cerere DATE,
    id_identitate int,
    id_nastere int,
    id_domiciliu int,
    id_resedinta int,
    id_parinti int,
    id_copii int,
    id_user int,
    id_taxa int,
    
    FOREIGN KEY (id_identitate) REFERENCES date_identitate(id_identitate),
    FOREIGN KEY (id_nastere) REFERENCES adresa_nastere(id_nastere),
    FOREIGN KEY (id_domiciliu) REFERENCES adresa_domiciliu(id_domiciliu),
    FOREIGN KEY (id_resedinta) REFERENCES adresa_resedinta(id_resedinta),
    FOREIGN KEY (id_parinti) REFERENCES parinti(id_parinti),
    FOREIGN KEY (id_copii) REFERENCES copii_minori(id_copii),
    FOREIGN KEY (id_user) REFERENCES users(id_user),
    FOREIGN KEY (id_taxa) REFERENCES taxa(id_taxa)
);
















-- INTRODUCEREA DATELOR

INSERT INTO users(email, fname, lname, psw)
VALUES 
	('email@gmail.com', "Danu", "Oprea", "qwerty1"),
    ('2email@gmail.com', "Mihail", "Moraru", "qwerty122"),
    ('3email@gmail.com', "Ana", "Maria", "qwerty133");



INSERT INTO cereri(cod_cerere, servicii_consulat, oficiul_consulat, data_programarii, data_cerere, id_identitate, id_nastere, id_domiciliu, id_resedinta, id_parinti, id_copii, id_user, id_taxa)
VALUES 
	('MD1545345', "Depunerea Actelor Jurmamint", "Chisinau", "2001-08-20", "2001-08-25", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
    ('MD1545345', "Depunerea Actelor Jurmamint", "Chisinau", "2001-08-20", "2001-08-25", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
    ('MD1545345', "Depunerea Actelor Jurmamint", "Chisinau", "2001-08-20", "2001-08-25", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL),
    ('MD1545345', "Depunerea Actelor Jurmamint", "Chisinau", "2001-08-20", "2001-08-25", NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);


INSERT INTO adresa_domiciliu(tara, regiunea, localitatea, strada, numar, bloc, etaj, scara, apartament, cod_postal)
VALUES 
	('Moldova', "Dubasari", "Molovata Noua", "Boris Glavan", "10", NULL, NULL, NULL, NULL, 4576),
    ('Franta', "Paris", "Postcards", " Far AwayColdplay", 110, 50, 5, 2, 5, 2255),
    ('Romania', "Suceava", "Timisoara", "Florilor", 11, 20, 3, 1, 4, 7856);

INSERT INTO adresa_nastere(tara, regiunea, localitatea, strada, numar, bloc, etaj, scara, apartament, cod_postal)
VALUES 
	('Moldova', "Dubasari", "Molovata Noua", "Boris Glavan", "10", NULL, NULL, NULL, NULL, 4576),
    ('Franta', "Paris", "Postcards", " Far AwayColdplay", 110, 50, 5, 2, 5, 2255),
    ('Romania', "Suceava", "Timisoara", "Florilor", 11, 20, 3, 1, 4, 7856);

INSERT INTO adresa_resedinta(tara, regiunea, localitatea, strada, numar, bloc, etaj, scara, apartament, cod_postal)
VALUES 
	('Moldova', "Dubasari", "Molovata Noua", "Boris Glavan", "10", NULL, NULL, NULL, NULL, 4576),
    ('Franta', "Paris", "Postcards", " Far AwayColdplay", 110, 50, 5, 2, 5, 2255),
    ('Romania', "Suceava", "Timisoara", "Florilor", 11, 20, 3, 1, 4, 7856)

INSERT INTO copii_minori(nume, prenume, id_identitate_copil, id_nastere_minor)
VALUES 
	('Oprea', "Bogdan", NULL, NULL),
    ('Alexei', "Ana", NULL, NULL),
    ('Moraru', "Ana-Maria", NULL, NULL),
    ('Cuciuc', "Marcel", NULL, NULL);

INSERT INTO date_identitate(nume, prenume, sex, data_nasterii, cetatenia, id_doc_identitate, email, telefon)
VALUES 
	('Oprea', "Bogdan", "M", "2020-01-20", "MDA", NULL, "opreabogdan@gmail.com", 79766345),
    ('Alexei', "Ana", "F", "2001-08-25", "MDA", NULL, "alexeiana@gmail.com", 69879965),
    ('Moraru', "Ana-Maria", "F", "1999-08-20", "MDA", NULL, "moraruanam@gmail.com", 87512335656),
    ('Cuciuc', "Marcel", "M", "2019-01-01", "MDA", NULL, "cuciuc@gmail.com", 87512335656);

INSERT INTO doc_identitate(doc_md, seria, nr_serie, tip_doc, data_emitere, data_expiratie, valabilitatea_infinit, emis)
VALUES 
	(0, "B", "135956867", "Buletin de Identitate", "2005-01-01", "2010-01-01", 0, "Emis de"),
    (0, "A", "518181512", "Buletin de Identitate", "2005-01-01", NULL, 1, "Emis"),
    (0, NULL, "618464188", "Pasaport", "2005-01-01", NULL, 1, "Ambasada"),
    (0, "B", "684138468", "Buletin de Identitate", "2010-08-22", "2020-08-22", 0, "Emis de");


INSERT INTO parinti(nume, prenume, gen_parinte, id_identitate_parinte)
VALUES 
	('Oprea', "Anatol", "M", NULL),
    ('Perebinos', "Mihail", "M", NULL),
    ('Moraru', "Mihaela", "F", NULL),
    ('Cuciuc', "Marcel", "M", NULL);


INSERT INTO taxa(modalitate, valuta, taxa)
VALUES 
	('Online', "MDA", 15000),
    ('Card', "EUR", 150),
    ('Online', "MDA", 15000),
    ('Cash', "US", 200);



































DROP DATABASE IF EXISTS consulat;
CREATE DATABASE consulat;
USE  consulat;

CREATE TABLE adresa_nastere (
    id_nastere int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE adresa_domiciliu (
    id_domiciliu int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE adresa_resedinta (
    id_resedinta int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE doc_identitate (
	id_doc_identitate int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    IDNP int(20) NOT NULL,
    doc_md BOOLEAN,
    seria varchar(2),
    nr_serie int(10),
    tip_doc varchar(100),
    data_emitere DATE,
    data_expiratie DATE,
    valabilitatea_infinit BOOLEAN,
    emis varchar(20)
    
);

CREATE TABLE date_identitate (
    id_identitate int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nume varchar(40),
    prenume varchar(40),
    sex varchar(10),
    data_nasterii DATE,
    cetatenia varchar(10),
    id_doc_identitate int,
    email varchar(30),
    telefon int(20),
    
    FOREIGN KEY (id_doc_identitate) REFERENCES doc_identitate(id_doc_identitate) ON DELETE CASCADE
);

CREATE TABLE parinti (
    id_parinti int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nume varchar(40),
    prenume varchar(40),
    gen_parinte varchar(10),
    id_identitate_parinte int,
    
    FOREIGN KEY (id_identitate_parinte) REFERENCES date_identitate(id_identitate) ON DELETE CASCADE
);

CREATE TABLE copii_minori (
    id_copii int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nume varchar(40),
    prenume varchar(40),
    id_identitate_copil int,
    id_nastere_minor int,
        
    FOREIGN KEY (id_identitate_copil) REFERENCES date_identitate(id_identitate) ON DELETE CASCADE,
    FOREIGN KEY (id_nastere_minor) REFERENCES adresa_nastere(id_nastere) ON DELETE CASCADE
);

CREATE TABLE users(
	id_user int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    email varchar(30),
    fname varchar(20),
    lname varchar(20),
    psw varchar(256) 
);

CREATE TABLE taxa(
	id_taxa int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    modalitate varchar(30),
    valuta varchar(10),
    taxa int(8)
);

CREATE TABLE cereri (
    id_cereri int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    cod_cerere varchar(20),
    servicii_consulat varchar(100),
    oficiul_consulat varchar(100),
    data_programarii DATE,
    data_cerere DATE,
    id_identitate int,
    id_nastere int,
    id_domiciliu int,
    id_resedinta int,
    id_parinti int,
    id_copii int,
    id_user int,
    id_taxa int,
    
    FOREIGN KEY (id_identitate) REFERENCES date_identitate(id_identitate) ON DELETE CASCADE,
    FOREIGN KEY (id_nastere) REFERENCES adresa_nastere(id_nastere) ON DELETE CASCADE,
    FOREIGN KEY (id_domiciliu) REFERENCES adresa_domiciliu(id_domiciliu) ON DELETE CASCADE,
    FOREIGN KEY (id_resedinta) REFERENCES adresa_resedinta(id_resedinta) ON DELETE CASCADE,
    FOREIGN KEY (id_parinti) REFERENCES parinti(id_parinti) ON DELETE CASCADE,
    FOREIGN KEY (id_copii) REFERENCES copii_minori(id_copii) ON DELETE CASCADE,
    FOREIGN KEY (id_user) REFERENCES users(id_user) ON DELETE CASCADE,
    FOREIGN KEY (id_taxa) REFERENCES taxa(id_taxa) ON DELETE CASCADE
);




























DROP DATABASE IF EXISTS consulat;
CREATE DATABASE consulat;
USE  consulat;

CREATE TABLE adresa_nastere (
    id_nastere int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE adresa_domiciliu (
    id_domiciliu int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE adresa_resedinta (
    id_resedinta int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    tara varchar(20),
    regiunea varchar(20),
    localitatea varchar(20),
    strada varchar(50),
    numar int(10),
    bloc int(6),
    etaj int(3),
    scara int(3),
    apartament int(4),
    cod_postal int(6)
);

CREATE TABLE doc_identitate (
	id_doc_identitate int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    IDNP int(20) NOT NULL,
    doc_md BOOLEAN,
    seria varchar(2),
    nr_serie int(10),
    tip_doc varchar(100),
    data_emitere DATE,
    data_expiratie DATE,
    valabilitatea_infinit BOOLEAN,
    emis varchar(20)
    
);

CREATE TABLE date_identitate (
    id_identitate int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nume varchar(40),
    prenume varchar(40),
    sex varchar(10),
    data_nasterii DATE,
    cetatenia varchar(10),
    id_doc_identitate int,
    email varchar(30),
    telefon int(20),
    
    FOREIGN KEY (id_doc_identitate) REFERENCES doc_identitate(id_doc_identitate) ON DELETE CASCADE
);

CREATE TABLE parinti (
    id_parinti int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    id_identitate_mama int,
    id_identitate_tata int,
    
    FOREIGN KEY (id_identitate_mama) REFERENCES date_identitate(id_identitate) ON DELETE CASCADE,
    FOREIGN KEY (id_identitate_tata) REFERENCES date_identitate(id_identitate) ON DELETE CASCADE
);

CREATE TABLE copii_minori (
    id_copii int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    nume varchar(40),
    prenume varchar(40),
    id_identitate_copil int,
    id_nastere_minor int,
        
    FOREIGN KEY (id_identitate_copil) REFERENCES date_identitate(id_identitate) ON DELETE CASCADE,
    FOREIGN KEY (id_nastere_minor) REFERENCES adresa_nastere(id_nastere) ON DELETE CASCADE
);

CREATE TABLE users(
	id_user int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    email varchar(30),
    fname varchar(20),
    lname varchar(20),
    psw varchar(256) 
);

CREATE TABLE taxa(
	id_taxa int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    modalitate varchar(30),
    valuta varchar(10),
    taxa int(8)
);

CREATE TABLE cereri (
    id_cereri int(10) NOT NULL AUTO_INCREMENT PRIMARY KEY,
    cod_cerere varchar(20),
    servicii_consulat varchar(100),
    oficiul_consulat varchar(100),
    data_programarii DATE,
    data_cerere DATE,
    id_identitate int,
    id_nastere int,
    id_domiciliu int,
    id_resedinta int,
    id_parinti int,
    id_copii int,
    id_user int,
    id_taxa int,
    
    FOREIGN KEY (id_identitate) REFERENCES date_identitate(id_identitate) ON DELETE CASCADE,
    FOREIGN KEY (id_nastere) REFERENCES adresa_nastere(id_nastere) ON DELETE CASCADE,
    FOREIGN KEY (id_domiciliu) REFERENCES adresa_domiciliu(id_domiciliu) ON DELETE CASCADE,
    FOREIGN KEY (id_resedinta) REFERENCES adresa_resedinta(id_resedinta) ON DELETE CASCADE,
    FOREIGN KEY (id_parinti) REFERENCES parinti(id_parinti) ON DELETE CASCADE,
    FOREIGN KEY (id_copii) REFERENCES copii_minori(id_copii) ON DELETE CASCADE,
    FOREIGN KEY (id_user) REFERENCES users(id_user) ON DELETE CASCADE,
    FOREIGN KEY (id_taxa) REFERENCES taxa(id_taxa) ON DELETE CASCADE
);